package model

import (
  "testing"

  "github.com/stretchr/testify/assert"
)

func Test_String(t *testing.T) {

  t.Log("zero value")
  {
    assert.Equal(t, "0", new(Dec).String())
  }

  t.Log("-1.0")
  {
    entity, _ := new(Dec).SetString("-1.0")
    assert.Equal(t, "-1.0", entity.String())
  }

  t.Log("1.0")
  {
    entity, _ := new(Dec).SetString("1.0")
    assert.Equal(t, "1.0", entity.String())
  }

  t.Log("0.1")
  {
    entity, _ := new(Dec).SetString("0.1")
    assert.Equal(t, "0.1", entity.String())
  }

  t.Log("-0.1")
  {
    entity, _ := new(Dec).SetString("-0.1")
    assert.Equal(t, "-0.1", entity.String())
  }

}

func Test_Add(t *testing.T) {
  t.Log("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003")
  {
    a, _ := new(Dec).SetString("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002")
    b, _ := new(Dec).SetString("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001")
    assert.Equal(t, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003", new(Dec).Add(a, b).String())
  }

  t.Log("300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
  {
    a, _ := new(Dec).SetString("100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    b, _ := new(Dec).SetString("200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    assert.Equal(t, "300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", new(Dec).Add(a, b).String())
  }

  t.Log("30000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000003")
  {
    a, _ := new(Dec).SetString("10000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000002")
    b, _ := new(Dec).SetString("20000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000001")
    assert.Equal(t, "30000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000003", new(Dec).Add(a, b).String())
  }
}

func Test_Sub(t *testing.T) {
  t.Log("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001")
  {
    a, _ := new(Dec).SetString("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003")
    b, _ := new(Dec).SetString("0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002")
    assert.Equal(t, "0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001", new(Dec).Sub(a, b).String())
  }

  t.Log("100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
  {
    a, _ := new(Dec).SetString("300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    b, _ := new(Dec).SetString("200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    assert.Equal(t, "100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", new(Dec).Sub(a, b).String())
  }

  t.Log("10000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000001")
  {
    a, _ := new(Dec).SetString("30000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000003")
    b, _ := new(Dec).SetString("20000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000002")
    assert.Equal(t, "10000000000000000000000000000000000000000000000000000000.000000000000000000000000000000000000000000000000000000001", new(Dec).Sub(a, b).String())
  }
}

func BenchmarkDec_String(b *testing.B) {
  entity := new(Dec)

  b.ReportAllocs()
  b.ResetTimer()
  for n := 0; n < b.N; n++ {
    entity.String()
  }
}
